{"componentChunkName":"component---src-templates-post-js","path":"/posts/firing-a-tracking-pixel-on-button-click-without-gtm","result":{"data":{"contentfulPost":{"title":"Firing a tracking pixel on button click without GTM","date":"August 13th, 2020","content":{"childMarkdownRemark":{"html":"<p>As a solutions engineer in Adtech, sometimes we have to create ways to bend the will of the browser for our clients. One of our clients wanted to fire a tracking pixel on a button click. With <a href=\"https://marketingplatform.google.com/intl/en_uk/about/tag-manager/\">Google Tag Manager</a> this is very easy, you just use a custom trigger using a CSS selector. The client wasn't using Google Tag Manager (GTM) so I put this together.</p>\n<pre><code class=\"language-html\">&#x3C;button id=\"unique_id\">click me&#x3C;/button>\n\n&#x3C;script type=\"text/javascript\">\n    (() => {\n        const b = document.getElementById('unique_id');\n        b.onclick = () => {\n            const i = document.createElement('img');\n            i.src = '&#x3C; your pixel src goes here >';\n            i.setAttribute('width', 0);\n            i.setAttribute('height', 0);\n            b.parentElement.appendChild(i);\n        };\n    })();\n&#x3C;/script>\n</code></pre>\n<h3>Breakdown</h3>\n<p>The first bit is pretty simple, this is out button.</p>\n<pre><code class=\"language-html\">&#x3C;button id=\"unique_id\">click me&#x3C;/button>\n</code></pre>\n<p>The next part is where the pixel gets appended to the body on button click where it's then fired.</p>\n<pre><code class=\"language-html\">&#x3C;script type=\"text/javascript\">\n    (() => {\n        const b = document.getElementById('unique_id');\n        b.onclick = () => {\n            const i = document.createElement('img');\n            i.src = '&#x3C; your pixel src goes here >';\n            i.setAttribute('width', 0);\n            i.setAttribute('height', 0);\n            b.parentElement.appendChild(i);\n        };\n    })();\n&#x3C;/script>\n</code></pre>\n<p>I have set up anonymous function, which gets the button by its ID and stores it into the variable <code>b</code>.</p>\n<p>Then a click handler is added to <code>b</code> which allows us to do what we need to when the button is clicked. Once the button is clicked we create our <code>img</code> HTML element, we then set its height and width via <code>setAttribute</code> we set this to <code>0</code>. Then we append it to the parent element which is the HTML body.</p>\n<p>This is when the pixel is fired.</p>\n<p>All in all pretty simple, but a cool little way of achieving what the client wants when they were using GTM.</p>","timeToRead":1}}}},"pageContext":{"slug":"firing-a-tracking-pixel-on-button-click-without-gtm"}},"staticQueryHashes":["63159454"]}